# OpenCV {#opencv}

`r CiteDate(20210327)` The [MLHub](https://mlhub.ai) package
[opencv](https://github.com/gjwgit/opencv) exposes the functionalities
of the Open Computer Vision toolkit.

Currently only blurriness of images is implemented through the
**blurry** command.

To install, configure, and demonstrate the package:

```bash
ml install opencv
ml configure opencv
ml readme opencv
ml commands opencv
```

The package supports the command
`r ml_command(opencv,blurry)`.

The source code for this MLHub package is available from github:
<https://github.com/gjwgit/opencv>.

<!---------------------------------------------------------------------->
## opencv overview
<!---------------------------------------------------------------------->


<!---------------------------------------------------------------------->
## opencv quick start
<!---------------------------------------------------------------------->


<!---------------------------------------------------------------------->
## opencv blurry
<!---------------------------------------------------------------------->

The variance of the Laplacian approach to calculating a measure of
blurriness convolves the input image with the Laplacian operator and
computes the variance! A variance (blurriness) of 100 or less is
regarded as blurry.  The larger the measure the sharper the
image. Below are a few examples. For reference see
https://github.com/indyka/blur-detection.

![](https://digital-photography-school.com/wp-content/uploads/2014/10/DSC_3913_4_5_6_7_tonemapped-Edit.jpg)
```console
$ ml blurry opencv https:digital-photography-school.com/wp-content/uploads/2014/10/DSC_3913_4_5_6_7_tonemapped-Edit.jpg
Okay 5670
```
![](http://cdn1.thr.com/sites/default/files/2013/11/marina_bay_sands_singapore_a_l.jpg)
```console
$ ml blurry opencv http://cdn1.thr.com/sites/default/files/2013/11/marina_bay_sands_singapore_a_l.jpg
Okay 1303
```
![](https://3.bp.blogspot.com/_Mjt2vy7HUaY/TKY6tQvJzFI/AAAAAAAAAGA/4qwNjH2ivzw/s1600/sharp+focus.jpg)
```console
$ ml blurry opencv https://3.bp.blogspot.com/_Mjt2vy7HUaY/TKY6tQvJzFI/AAAAAAAAAGA/4qwNjH2ivzw/s1600/sharp+focus.jpg
Okay 951
```

![](https://images.pexels.com/photos/338515/pexels-photo-338515.jpeg)
```console
$ ml blurry opencv https://images.pexels.com/photos/338515/pexels-photo-338515.jpeg
Okay 374
```
![](https://www.arrivalguides.com/s3/ag-images-eu/18/20870ca6f7bc086749ea747ec0c8c86d.jpg)
```console
$ ml blurry opencv https://www.arrivalguides.com/s3/ag-images-eu/18/20870ca6f7bc086749ea747ec0c8c86d.jpg
Okay 170
```
![](https://cdn.photographylife.com/wp-content/uploads/2009/09/Red1-960x638.jpg)
```CONSOLE
$ ml blurry opencv https://cdn.photographylife.com/wp-content/uploads/2009/09/Red1-960x638.jpg
Okay 167
```
![](https://www.nyip.edu/images/cms/photo-articles/stop-taking-blurry-pictures.jpg)
```console
$ ml blurry opencv https://www.nyip.edu/images/cms/photo-articles/stop-taking-blurry-pictures.jpg
Blurry 68
```
![](http://getwallpapers.com/wallpaper/full/4/5/4/314199.jpg)
```console
$ ml blurry opencv http://getwallpapers.com/wallpaper/full/4/5/4/314199.jpg
Blurry 43
```
The algorithm is not perfect, or is it just the choice of the
threshold. Perhaps 150 is a better threshold?

![](https://photos1.blogger.com/blogger/4886/2467/1600/23%20-%20Blurry%20Megan%20and%20Colosseum%20at%20night.jpg)
```console
$ ml blurry opencv https://photos1.blogger.com/blogger/4886/2467/1600/23%20-%20Blurry%20Megan%20and%20Colosseum%20at%20night.jpg
Okay 119
```

<!---------------------------------------------------------------------->
## opencv blurry pipeline
<!---------------------------------------------------------------------->

A common task is to assess the blurriness of a folder of
images. Here's a short script that will do that for us:

```console
$ for f in *.{png,jpg}; do echo -n "$f "; ml blurry opencv $f; done
street_img1.png Okay 610
street_img2.png Okay 481
street_img3.jpg Blurry 64
street_img4.jpg Okay 903
street_img5.jpg Blurry 91
street_img6.jpg Blurry 71
street_img7.jpg Blurry 75
street_img8.jpg Blurry 60
street_img9.jpg Blurry 93
```
