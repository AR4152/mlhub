```{r include=FALSE}

target <- ifelse(knitr::is_html_output(), '{ target="_blank" }', '')

########################################################################
# CODE BLOCKS

knitr::knit_engines$set(php = function(options)
{
  code <- options$code
  code
})

########################################################################
# HELPERS

#-----------------------------------------------------------------------
# Support citation dates for each section for HTML and LaTeX.
#-----------------------------------------------------------------------

CiteDate <- function(date)
{
  if (knitr::is_html_output())
    glue::glue("<font size=1><i>{date}</i></font>")
  else
    glue::glue("\\CiteDate{<date>}", .open="<", .close=">")
}

include_graphics_url <- function(url)
{
  if (knitr::is_html_output())
    knitr::include_graphics(url)
  else
    knitr::include_url(url)
}

########################################################################
# LINKS

#-----------------------------------------------------------------------
# Link a Linux command to online man page.
#-----------------------------------------------------------------------

Command <- function(cmd, txt=cmd)
{
  cmd <- as.character(substitute(cmd))
  glue::glue('[<txt>](https://man.cx/<cmd>)<target>', .open="<", .close=">")
# Wikipedia uses https://www.mankier.com/
# glue::glue("[{txt}](https://manpages.ubuntu.com/cgi-bin/search.py?q={cmd})")
}

#-----------------------------------------------------------------------
# Set up an external URL link to open in new tab.
#-----------------------------------------------------------------------

Link <- function(txt, url)
{
  glue::glue('[<txt>](<url>)<target>', .open="<", .close=">")
}

#-----------------------------------------------------------------------
# Link a Ubuntu package to online description.
#-----------------------------------------------------------------------

Package <- function(pkg, txt=pkg)
{
  pkg <- as.character(substitute(pkg))
  glue::glue('[<txt>](https://packages.ubuntu.com/<pkg>)<target>', .open="<", .close=">")
}

#-----------------------------------------------------------------------
# Link to the Wikipedia entry.
#-----------------------------------------------------------------------

Wikipedia <- function(txt, title=txt)
{
  glue::glue('[<txt>](https://secure.wikimedia.org/wikipedia/en/wiki/<title>)<target>', .open="<", .close=">")
}
             
``` 

